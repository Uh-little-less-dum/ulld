{"version":3,"sources":["../src/classes/pkgJson.ts"],"sourcesContent":["import { PackageManagers } from \"../types.js\";\nimport { PackageJson } from \"./baseClasses/pkgJson.js\";\n\n\nexport class TargetPackageJson extends PackageJson {\n    constructor(\n        public targetDir: string,\n        public isLocalDev: boolean,\n        public baseAppGitBranch: string\n    ) {\n        super(targetDir, undefined, baseAppGitBranch);\n    }\n    includesUlldDependencies(): boolean {\n        if (!this.data) {\n            return false;\n        }\n        let deps = Object.keys(this.data.dependencies);\n        return deps.filter((a) => a.startsWith(\"@ulld\")).length > 0;\n    }\n\n    write(p: PackageManagers){\n        super.write(p)\n    }\n\n    // ULLD_BUILD_PROCESS: Need to handle this.\n    // TODO: Need to handle this. Can't do shit without wifi right now.\n    async installDependencies(forceLocalSource?: boolean, providedPackageManager?: PackageManagers) {\n        let manager = providedPackageManager ? providedPackageManager : await this.promptForPackageManager();\n        if (!manager) {\n            console.log(`Could not find a preferred package manager. Exiting.`);\n            process.exit(1);\n        }\n        if (forceLocalSource) {\n            this.logDebug(`Applying local sources for development build.`)\n            this.exec(\n                `ULLD_TEST_ROOT=\"${this.targetDir}\" tsx /Users/bigsexy/Desktop/current/ulld/buildUtils/setClonedBaseAppInternalDepLocations.ts toLocal`,\n            );\n        }\n        this.log(`Downloading dependencies with ${manager}`);\n        this.log(`This might take a minute... Now's the time to get some coffee.`);\n        this.exec(`${manager} install`, this.targetDir);\n        this.log(`Whew! Installed everything we need to wrap this up...`);\n    }\n}\n"],"mappings":";;;;;;;;AAAA;AAIO,IAAM,oBAAN,cAAgC,YAAY;AAAA,EAC/C,YACW,WACA,YACA,kBACT;AACE,UAAM,WAAW,QAAW,gBAAgB;AAJrC;AACA;AACA;AAAA,EAGX;AAAA,EACA,2BAAoC;AAChC,QAAI,CAAC,KAAK,MAAM;AACZ,aAAO;AAAA,IACX;AACA,QAAI,OAAO,OAAO,KAAK,KAAK,KAAK,YAAY;AAC7C,WAAO,KAAK,OAAO,CAAC,MAAM,EAAE,WAAW,OAAO,CAAC,EAAE,SAAS;AAAA,EAC9D;AAAA,EAEA,MAAM,GAAmB;AACrB,UAAM,MAAM,CAAC;AAAA,EACjB;AAAA;AAAA;AAAA,EAIA,MAAM,oBAAoB,kBAA4B,wBAA0C;AAC5F,QAAI,UAAU,yBAAyB,yBAAyB,MAAM,KAAK,wBAAwB;AACnG,QAAI,CAAC,SAAS;AACV,cAAQ,IAAI,sDAAsD;AAClE,cAAQ,KAAK,CAAC;AAAA,IAClB;AACA,QAAI,kBAAkB;AAClB,WAAK,SAAS,+CAA+C;AAC7D,WAAK;AAAA,QACD,mBAAmB,KAAK,SAAS;AAAA,MACrC;AAAA,IACJ;AACA,SAAK,IAAI,iCAAiC,OAAO,EAAE;AACnD,SAAK,IAAI,gEAAgE;AACzE,SAAK,KAAK,GAAG,OAAO,YAAY,KAAK,SAAS;AAC9C,SAAK,IAAI,uDAAuD;AAAA,EACpE;AACJ;","names":[]}