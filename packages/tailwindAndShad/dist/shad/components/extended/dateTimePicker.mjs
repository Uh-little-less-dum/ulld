import { a as a$2, b, d as d$1 } from '../../../chunk-HQDIYT47.mjs';
import { b as b$1, a as a$3 } from '../../../chunk-7BOHER4E.mjs';
import { a as a$1 } from '../../../chunk-32OU4IAK.mjs';
import { a, d, c, g, i } from '../../../chunk-W4KKKSL6.mjs';
import '../../../chunk-ORBRSQKI.mjs';
import '../../../chunk-PD25TUY5.mjs';
import { cn } from '@ulld/utilities/cn';
import { format, add } from 'date-fns';
import { enUS } from 'date-fns/locale';
import { Clock, Calendar, ChevronLeft, ChevronRight } from 'lucide-react';
import * as t from 'react';
import { useImperativeHandle, useRef } from 'react';
import { DayPicker } from 'react-day-picker';

function se(e){return /^(0[0-9]|1[0-9]|2[0-3])$/.test(e)}function ue(e){return /^(0[1-9]|1[0-2])$/.test(e)}function ce(e){return /^[0-5][0-9]$/.test(e)}function L(e,{max:r,min:n=0,loop:s=!1}){let o=parseInt(e,10);return Number.isNaN(o)?"00":(s?(o>r&&(o=n),o<n&&(o=r)):(o>r&&(o=r),o<n&&(o=n)),o.toString().padStart(2,"0"))}function W(e){return se(e)?e:L(e,{max:23})}function q(e){return ue(e)?e:L(e,{min:1,max:12})}function V(e){return ce(e)?e:L(e,{max:59})}function B(e,{min:r,max:n,step:s}){let o=parseInt(e,10);return Number.isNaN(o)?"00":(o+=s,L(String(o),{min:r,max:n,loop:!0}))}function le(e,r){return B(e,{min:0,max:23,step:r})}function fe(e,r){return B(e,{min:1,max:12,step:r})}function j(e,r){return B(e,{min:0,max:59,step:r})}function de(e,r){let n=V(r);return e.setMinutes(parseInt(n,10)),e}function me(e,r){let n=V(r);return e.setSeconds(parseInt(n,10)),e}function pe(e,r){let n=W(r);return e.setHours(parseInt(n,10)),e}function ge(e,r,n){let s=parseInt(q(r),10),o=Pe(s,n);return e.setHours(o),e}function F(e,r,n,s){switch(n){case"minutes":return de(e,r);case"seconds":return me(e,r);case"hours":return pe(e,r);case"12hours":return s?ge(e,r,s):e;default:return e}}function he(e,r){if(!e)return "00";switch(r){case"minutes":return V(String(e.getMinutes()));case"seconds":return V(String(e.getSeconds()));case"hours":return W(String(e.getHours()));case"12hours":return q(String(J(e.getHours())));default:return "00"}}function ye(e,r,n){switch(n){case"minutes":return j(e,r);case"seconds":return j(e,r);case"hours":return le(e,r);case"12hours":return fe(e,r);default:return "00"}}function Pe(e,r){return r==="PM"?e<=11?e+12:e:r==="AM"&&e===12?0:e}function J(e){return e===0||e===12?"12":e>=22?`${e-12}`:e%12>9?`${e}`:`0${e%12}`}function be(e){return Array.from({length:12},(r,n)=>({value:n,label:format(new Date(2021,n),"MMMM",{locale:e})}))}function we(e=50){let r=new Date;return Array.from({length:e*2+1},(n,s)=>({value:r.getFullYear()-e+s,label:(r.getFullYear()-e+s).toString()}))}function Q({className:e,classNames:r,showOutsideDays:n=!0,yearRange:s=50,...o}){let l=t.useMemo(()=>{let i=enUS,{options:u,localize:a,formatLong:d}=o.locale||{};return u&&a&&d&&(i={options:u,localize:a,formatLong:d}),be(i)},[]),f=t.useMemo(()=>we(s),[]);return t.createElement(DayPicker,{showOutsideDays:n,className:cn("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4  sm:space-y-0 justify-center",month:"flex flex-col items-center space-y-4",month_caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center ",button_previous:cn(a$3({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 absolute left-5 top-5"),button_next:cn(a$3({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 absolute right-5 top-5"),month_grid:"w-full border-collapse space-y-1",weekdays:cn("flex",o.showWeekNumber&&"justify-end"),weekday:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",week:"flex w-full mt-2",day:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20 rounded-1",day_button:cn(a$3({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100 rounded-l-md rounded-r-md"),range_end:"day-range-end",selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground rounded-l-md rounded-r-md",today:"bg-accent text-accent-foreground",outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",disabled:"text-muted-foreground opacity-50",range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",hidden:"invisible",...r},components:{Chevron:({...i})=>i.orientation==="left"?t.createElement(ChevronLeft,{className:"h-4 w-4"}):t.createElement(ChevronRight,{className:"h-4 w-4"}),MonthCaption:({calendarMonth:i$1})=>t.createElement("div",{className:"inline-flex gap-2"},t.createElement(a,{defaultValue:i$1.date.getMonth().toString(),onValueChange:u=>{let a=new Date(i$1.date);a.setMonth(Number.parseInt(u,10)),o.onMonthChange?.(a);}},t.createElement(d,{className:"w-fit gap-1 border-none p-0 focus:bg-accent focus:text-accent-foreground"},t.createElement(c,null)),t.createElement(g,null,l.map(u=>t.createElement(i,{key:u.value,value:u.value.toString()},u.label)))),t.createElement(a,{defaultValue:i$1.date.getFullYear().toString(),onValueChange:u=>{let a=new Date(i$1.date);a.setFullYear(Number.parseInt(u,10)),o.onMonthChange?.(a);}},t.createElement(d,{className:"w-fit gap-1 border-none p-0 focus:bg-accent focus:text-accent-foreground"},t.createElement(c,null)),t.createElement(g,null,f.map(u=>t.createElement(i,{key:u.value,value:u.value.toString()},u.label)))))},...o})}Q.displayName="Calendar";var X=t.forwardRef(({period:e,setPeriod:r,date:n,onDateChange:s,onLeftFocus:o,onRightFocus:l},f)=>{let i$1=a=>{a.key==="ArrowRight"&&l?.(),a.key==="ArrowLeft"&&o?.();},u=a=>{if(r?.(a),n){let d=new Date(n),m=J(n.getHours());s?.(F(d,m.toString(),"12hours",e==="AM"?"PM":"AM"));}};return t.createElement("div",{className:"flex h-10 items-center"},t.createElement(a,{defaultValue:e,onValueChange:a=>u(a)},t.createElement(d,{ref:f,className:"w-[65px] focus:bg-accent focus:text-accent-foreground",onKeyDown:i$1},t.createElement(c,null)),t.createElement(g,null,t.createElement(i,{value:"AM"},"AM"),t.createElement(i,{value:"PM"},"PM"))))});X.displayName="TimePeriodSelect";var I=t.forwardRef(({className:e,type:r="tel",value:n,id:s,name:o,date:l=new Date(new Date().setHours(0,0,0,0)),onDateChange:f,onChange:i,onKeyDown:u,picker:a,period:d,onLeftFocus:m,onRightFocus:w,...D},R)=>{let[p,P]=t.useState(!1),[M,S]=t.useState("0");t.useEffect(()=>{if(p){let c=setTimeout(()=>{P(!1);},2e3);return ()=>clearTimeout(c)}},[p]);let h=t.useMemo(()=>he(l,a),[l,a]),g=c=>a==="12hours"&&p&&h.slice(1,2)==="1"&&M==="0"?`0${c}`:p?h.slice(1,2)+c:`0${c}`,_=c=>{if(c.key!=="Tab"){if(c.preventDefault(),c.key==="ArrowRight"&&w?.(),c.key==="ArrowLeft"&&m?.(),["ArrowUp","ArrowDown"].includes(c.key)){let b=c.key==="ArrowUp"?1:-1,A=ye(h,b,a);p&&P(!1);let E=l?new Date(l):new Date;f?.(F(E,A,a,d));}if(c.key>="0"&&c.key<="9"){a==="12hours"&&S(c.key);let b=g(c.key);p&&w?.(),P(E=>!E);let A=l?new Date(l):new Date;f?.(F(A,b,a,d));}}};return t.createElement(a$1,{ref:R,id:s||a,name:o||a,className:cn("w-[48px] text-center font-mono text-base tabular-nums caret-transparent focus:bg-accent focus:text-accent-foreground [&::-webkit-inner-spin-button]:appearance-none",e),value:n||h,onChange:c=>{c.preventDefault(),i?.(c);},type:r,inputMode:"decimal",onKeyDown:c=>{u?.(c),_(c);},...D})});I.displayName="TimePickerInput";var Z=t.forwardRef(({date:e,onChange:r,hourCycle:n=24,granularity:s="second"},o)=>{let l=t.useRef(null),f=t.useRef(null),i=t.useRef(null),u=t.useRef(null),[a,d]=t.useState(e&&e.getHours()>=12?"PM":"AM");return useImperativeHandle(o,()=>({minuteRef:l.current,hourRef:f.current,secondRef:i.current,periodRef:u.current}),[l,f,i]),t.createElement("div",{className:"flex items-center justify-center gap-2"},t.createElement("label",{htmlFor:"datetime-picker-hour-input",className:"cursor-pointer"},t.createElement(Clock,{className:"mr-2 h-4 w-4"})),t.createElement(I,{picker:n===24?"hours":"12hours",date:e,id:"datetime-picker-hour-input",onDateChange:r,ref:f,period:a,onRightFocus:()=>l.current?.focus()}),(s==="minute"||s==="second")&&t.createElement(t.Fragment,null,":",t.createElement(I,{picker:"minutes",date:e,onDateChange:r,ref:l,onLeftFocus:()=>f.current?.focus(),onRightFocus:()=>i.current?.focus()})),s==="second"&&t.createElement(t.Fragment,null,":",t.createElement(I,{picker:"seconds",date:e,onDateChange:r,ref:i,onLeftFocus:()=>l.current?.focus(),onRightFocus:()=>u.current?.focus()})),n===12&&t.createElement("div",{className:"grid gap-1 text-center"},t.createElement(X,{period:a,setPeriod:d,date:e,onDateChange:m=>{r?.(m),m&&m?.getHours()>=12?d("PM"):d("AM");},ref:u,onLeftFocus:()=>i.current?.focus()})))});Z.displayName="TimePicker";var Te=t.forwardRef(({locale:e=enUS,value:r,onChange:n,hourCycle:s=24,yearRange:o=50,disabled:l=!1,displayFormat:f,granularity:i="second",placeholder:u="Pick a date",...a},d)=>{let[m,w]=t.useState(r??new Date),D=useRef(null),R=g=>{if(!g)return;if(!r){n?.(g),w(g);return}let c=(g.getTime()-r.getTime())/(1e3*60*60*24),b=add(r,{days:Math.ceil(c)});n?.(b),w(b);};useImperativeHandle(d,()=>({...D.current,value:r}),[r]);let p={hour24:f?.hour24??`PPP HH:mm${!i||i==="second"?":ss":""}`,hour12:f?.hour12??`PP hh:mm${!i||i==="second"?":ss":""} b`},P=enUS,{options:M,localize:S,formatLong:h}=e;return M&&S&&h&&(P={...enUS,options:M,localize:S,formatLong:h}),t.createElement(a$2,null,t.createElement(b,{asChild:!0,disabled:l},t.createElement(b$1,{variant:"outline",className:cn("w-[280px] justify-start text-left font-normal",!r&&"text-muted-foreground"),ref:D},t.createElement(Calendar,{className:"mr-2 h-4 w-4"}),r?format(r,s===24?p.hour24:p.hour12,{locale:P}):t.createElement("span",null,u))),t.createElement(d$1,{className:"w-auto p-0"},t.createElement(Q,{mode:"single",selected:r,month:m,onSelect:g=>R(g),onMonthChange:R,yearRange:o,locale:e,...a}),i!=="day"&&t.createElement("div",{className:"border-t border-border p-3"},t.createElement(Z,{onChange:n,date:r,hourCycle:s,granularity:i}))))});Te.displayName="DateTimePicker";

export { Te as DateTimePicker, Z as TimePicker, I as TimePickerInput };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=dateTimePicker.mjs.map