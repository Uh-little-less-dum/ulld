{"version":3,"sources":["../src/utils/glob/getGlobServerSide.ts"],"names":["glob","fs","path","getGlobServerSide","props","appConfig","input","filePathGlobPropsSchema","res","returnAbsolute","x","withForwardSlash"],"mappings":"kFACA,OAAS,QAAAA,MAAY,OAErB,OAAOC,MAAQ,KACf,OAAOC,MAAU,OAMV,IAAMC,EAAoB,MAC7BC,EACAC,IACC,CACD,IAAIC,EAAQC,EAAwB,MAAMH,CAAK,EAC3CI,EAAO,MAAMR,EACbM,EAAM,KACN,CACI,IAAKD,EAAU,OACf,OAAQC,EAAM,QAAU,OACxB,MAAOA,EAAM,OAAS,OAC1B,CACJ,EACIG,EAAiBH,EAAM,WAAa,WACxC,OAAIG,EACAD,EAAMA,EAAI,IAAKE,GAAMR,EAAK,KAAKG,EAAU,OAAQK,CAAC,CAAC,EAEnDF,EAAMA,EAAI,IAAKE,GAAMC,EAAiBD,CAAC,CAAC,EAExCJ,EAAM,OAAS,SACfE,EAAMA,EAAI,OAAQE,GACdT,EACK,SAASQ,EAAiBC,EAAIR,EAAK,KAAKG,EAAU,OAAQK,CAAC,CAAC,EAC5D,YAAY,CACrB,GAEGF,CACX","sourcesContent":["import { AppConfigSchemaOutput } from \"@ulld/types\";\nimport { glob } from \"glob\";\nimport { z } from \"zod\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { filePathGlobPropsSchema } from \"../../schemas/filePath/filePathInput.js\";\nimport { withForwardSlash } from \"../fsUtils.js\";\n\nexport type GlobInput = z.input<typeof filePathGlobPropsSchema>;\n\nexport const getGlobServerSide = async (\n    props: GlobInput,\n    appConfig: AppConfigSchemaOutput,\n) => {\n    let input = filePathGlobPropsSchema.parse(props);\n    let res = (await glob(\n        input.glob,\n        {\n            cwd: appConfig.fsRoot,\n            ignore: input.ignore || undefined,\n            nodir: input.type === \"files\",\n        },\n    )) as string[];\n    let returnAbsolute = input.returnAs === \"absolute\";\n    if (returnAbsolute) {\n        res = res.map((x) => path.join(appConfig.fsRoot, x));\n    } else {\n        res = res.map((x) => withForwardSlash(x));\n    }\n    if (input.type === \"dirs\") {\n        res = res.filter((x) =>\n            fs\n                .statSync(returnAbsolute ? x : path.join(appConfig.fsRoot, x))\n                .isDirectory(),\n        );\n    }\n    return res;\n};\n"]}