{"version":3,"sources":["../../../src/utils/baseAppUtils/componentDocPathUtils.ts"],"names":["path","fs","componentDocsPathFromPluginComponent","pluginName","componentName","full","projectRoot","componentDocQueryObjectToUrl","query","url","t","docItemToComponentDocsFilePath","item","getComponentDocsContentFromItem","getItemsByQuery","buildData","ComponentDocsQuery","getPluginDocContentByIds","permitOppositeOfFullIfNotFound","x","content"],"mappings":"8EAAA,OAAOA,MAAU,OAEjB,OAAOC,MAAQ,KAIR,IAAMC,EAAuC,CAChDC,EACAC,EACAC,EAAgB,GAChBC,IAEON,EAAK,KACRM,GAAe,QAAQ,IAAI,EAC3B,oBACA,gBACAD,EAAO,OAAS,QAChB,UAAUF,CAAU,EACpB,GAAG,UAAUC,CAAa,CAAC,MAC/B,EAISG,EAAgCC,GAAoC,CAC7E,IAAIC,EAAM,IAAI,gBACd,OAAGD,EAAM,MACJ,MAAM,QAAQA,EAAM,GAAG,EAAIA,EAAM,IAAM,CAACA,EAAM,GAAG,GAAG,QAASE,GAAMD,EAAI,OAAO,MAAOC,CAAC,CAAC,EAEzFF,EAAM,MACLC,EAAI,IAAI,OAAQ,MAAM,EAEvBD,EAAM,OACLC,EAAI,IAAI,QAASD,EAAM,KAAK,EAE7BA,EAAM,QACLC,EAAI,IAAI,SAAUD,EAAM,MAAM,EAE/BA,EAAM,UACLC,EAAI,IAAI,WAAYD,EAAM,QAAQ,EAE/B,kBAAkBC,EAAI,SAAS,CAAC,EAC3C,EAEaE,EAAiC,CAC1CC,EACAP,EAAgB,KAETH,EACHU,EAAK,WACLA,EAAK,cACLP,CACJ,EAGSQ,EAAkC,MAC3CD,EACAP,EAAgB,KACf,CACD,IAAIL,EAAOW,EAA+BC,EAAMP,CAAI,EACpD,GAAI,GAACL,GAAQ,CAACC,EAAG,WAAWD,CAAI,GAGhC,OAAO,MAAMC,EAAG,SAAS,SAASD,EAAM,CAAE,SAAU,OAAQ,CAAC,CACjE,EAEac,EAAkB,CAC3BC,EACAP,IAEe,IAAIQ,EAAmB,EACtB,SAASD,EAAU,cAAeP,CAAK,EAG9CS,EAA2B,MACpCF,EACAZ,EACAC,EACAC,EAAgB,GAChBa,EAA0C,KACzC,CACD,IAAIN,EAAOG,EAAU,cAAc,KAAMI,GAC7BA,EAAE,aAAehB,GAAcgB,EAAE,gBAAkBf,CAC/D,EACA,GAAGQ,EAAM,CACL,IAAIQ,EAAU,MAAMP,EAAgCD,EAAMP,CAAI,EAC9D,MAAG,CAACe,GAAWF,IACXE,EAAU,MAAMP,EAAgCD,EAAM,CAACP,CAAI,GAExD,CACH,KAAAO,EACA,QAAAQ,CACJ,CACJ,CACJ","sourcesContent":["import path from \"path\";\nimport { BuildStaticDataOutput } from \"@ulld/types\";\nimport fs from \"fs\";\nimport { ComponentDocsQueryParams } from \"../../types/baseApp/componentDocsQuery.js\";\nimport { ComponentDocsQuery } from \"../../classes/query/componentDocs.js\";\n\nexport const componentDocsPathFromPluginComponent = (\n    pluginName: string,\n    componentName: string,\n    full: boolean = false,\n    projectRoot?: string,\n) => {\n    return path.join(\n        projectRoot || process.cwd(),\n        \"generatedMarkdown\",\n        \"componentDocs\",\n        full ? \"full\" : \"short\",\n        encodeURI(pluginName),\n        `${encodeURI(componentName)}.mdx`,\n    );\n};\n\n\nexport const componentDocQueryObjectToUrl = (query: ComponentDocsQueryParams) => {\n    let url = new URLSearchParams()\n    if(query.tag){\n        (Array.isArray(query.tag) ? query.tag : [query.tag]).forEach((t) => url.append(\"tag\", t))\n    }\n    if(query.full){\n        url.set(\"full\", \"true\")\n    }\n    if(query.query){\n        url.set(\"query\", query.query)\n    }\n    if(query.syntax){\n        url.set(\"syntax\", query.syntax)\n    }\n    if(query.pluginId){\n        url.set(\"pluginId\", query.pluginId)\n    }\n    return `/componentDocs?${url.toString()}`\n}\n\nexport const docItemToComponentDocsFilePath = (\n    item: BuildStaticDataOutput[\"componentDocs\"][number],\n    full: boolean = false,\n) => {\n    return componentDocsPathFromPluginComponent(\n        item.pluginName,\n        item.componentName,\n        full,\n    );\n};\n\nexport const getComponentDocsContentFromItem = async (\n    item: BuildStaticDataOutput[\"componentDocs\"][number],\n    full: boolean = false,\n) => {\n    let path = docItemToComponentDocsFilePath(item, full);\n    if (!path || !fs.existsSync(path)) {\n        return;\n    }\n    return await fs.promises.readFile(path, { encoding: \"utf-8\" });\n};\n\nexport const getItemsByQuery = (\n    buildData: BuildStaticDataOutput,\n    query: ComponentDocsQueryParams,\n) => {\n    let docQuery = new ComponentDocsQuery();\n    return docQuery.queryAll(buildData.componentDocs, query);\n};\n\nexport const getPluginDocContentByIds = async (\n    buildData: BuildStaticDataOutput,\n    pluginName: string,\n    componentName: string,\n    full: boolean = false,\n    permitOppositeOfFullIfNotFound: boolean = true\n) => {\n    let item = buildData.componentDocs.find((x) =>\n        Boolean(x.pluginName === pluginName && x.componentName === componentName),\n    );\n    if(item) {\n        let content = await getComponentDocsContentFromItem(item, full)\n        if(!content && permitOppositeOfFullIfNotFound){\n            content = await getComponentDocsContentFromItem(item, !full)\n        }\n        return {\n            item,\n            content\n        }\n    }\n};\n"]}