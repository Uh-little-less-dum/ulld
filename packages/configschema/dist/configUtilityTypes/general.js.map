{"version":3,"sources":["../../src/configUtilityTypes/general.ts"],"sourcesContent":["import {\n    DocumentTypeConfig,\n    documentTypeConfigSchema,\n} from \"../zod/documentConfigSchema.js\";\nimport { getInternalConfig } from \"../zod/getInternalConfig.js\";\nimport { AppConfigSchemaOutput } from \"../zod/main.js\";\nimport { DocTypes } from \"./docTypes.js\";\nimport { WithFs } from \"../types.js\";\n\nexport const getDocumentTypeConfig = (\n    docType: string | DocumentTypeConfig,\n    config?: AppConfigSchemaOutput,\n): DocumentTypeConfig | undefined => {\n    const _config: AppConfigSchemaOutput =\n        (config as AppConfigSchemaOutput) ||\n        (getInternalConfig<{}>() as AppConfigSchemaOutput);\n    let dt = typeof docType === \"string\" ? docType : docType.docType;\n    return _config.noteTypes?.find((f) => f.docType === dt);\n};\n\n// TODO: Move this to a glob pattern using the fs or path module when used on the backend to avoid multiple matches returning the first. Globs would allow much more fine tuning of paths.\nexport const getNoteTypeFromPath = (\n    rootRelativePath?: string | null,\n    config?: AppConfigSchemaOutput,\n) => {\n    if (!rootRelativePath) return \"RemoteNote\" as \"RemoteNote\";\n    const _config = config || getInternalConfig();\n    let nts = _config.noteTypes?.filter((n) =>\n        Boolean(n.fs && rootRelativePath.includes(n.fs)),\n    ) as WithFs[];\n    let nt = nts\n        .filter((f) => typeof f.fs !== \"undefined\")\n        .sort((a: WithFs, b: WithFs) => b.fs?.length - a.fs?.length)?.[0];\n    return nt ? documentTypeConfigSchema.parse(nt) : undefined;\n};\n\nexport const getRootRelativePath = (\n    slug: string,\n    docType: DocTypes,\n    config?: AppConfigSchemaOutput,\n) => {\n    const _config = config || getInternalConfig();\n    return `${_config.noteTypes?.find((t) => t.docType === docType)?.fs}/${slug}`;\n};\n"],"mappings":";;;;;;;;;;;;;;;;AASO,IAAM,wBAAwB,CACjC,SACA,WACiC;AACjC,QAAM,UACD,UACA,kBAAsB;AAC3B,MAAI,KAAK,OAAO,YAAY,WAAW,UAAU,QAAQ;AACzD,SAAO,QAAQ,WAAW,KAAK,CAAC,MAAM,EAAE,YAAY,EAAE;AAC1D;AAGO,IAAM,sBAAsB,CAC/B,kBACA,WACC;AACD,MAAI,CAAC;AAAkB,WAAO;AAC9B,QAAM,UAAU,UAAU,kBAAkB;AAC5C,MAAI,MAAM,QAAQ,WAAW;AAAA,IAAO,CAAC,MACjC,QAAQ,EAAE,MAAM,iBAAiB,SAAS,EAAE,EAAE,CAAC;AAAA,EACnD;AACA,MAAI,KAAK,IACJ,OAAO,CAAC,MAAM,OAAO,EAAE,OAAO,WAAW,EACzC,KAAK,CAAC,GAAW,MAAc,EAAE,IAAI,SAAS,EAAE,IAAI,MAAM,IAAI,CAAC;AACpE,SAAO,KAAK,yBAAyB,MAAM,EAAE,IAAI;AACrD;AAEO,IAAM,sBAAsB,CAC/B,MACA,SACA,WACC;AACD,QAAM,UAAU,UAAU,kBAAkB;AAC5C,SAAO,GAAG,QAAQ,WAAW,KAAK,CAAC,MAAM,EAAE,YAAY,OAAO,GAAG,EAAE,IAAI,IAAI;AAC/E;","names":[]}