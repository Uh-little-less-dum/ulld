{"version":3,"sources":["../../../../src/zod/build/database/database.ts","../../../../src/zod/build/database/postgres.ts"],"names":["z"],"mappings":";AAAA,SAAS,KAAAA,UAAS;;;ACAlB,SAAS,SAAS;AAEX,IAAM,uBAAuB,EAC/B,OAAO;AAAA,EACJ,MAAM,EAAE,OAAO,OAAO,EAAE,IAAI,EAAE,QAAQ,IAAI;AAAA,EAC1C,QAAQ,EAAE,OAAO,EAAE,QAAQ,MAAM;AAAA,EACjC,eAAe,EAAE,OAAO,EAAE,QAAQ,EAAE;AACxC,CAAC,EACA,QAAQ,CAAC,CAAC,EACV;AAAA,EAAO,CAAC,SACL,QAAQ,KAAK,kBAAkB,MAAO,KAAK,QAAQ,KAAK,MAAO;AACnE,EACC,UAAU,CAAC,SAAS;AACjB,MAAI,KAAK,iBAAiB,KAAK,kBAAkB,IAAI;AACjD,WAAO;AAAA,MACH,eAAe,KAAK;AAAA,IACxB;AAAA,EACJ;AACA,SAAO;AAAA,IACH,MAAM,KAAK;AAAA,IACX,QAAQ,KAAK;AAAA,EACjB;AACJ,CAAC;;;ADnBE,IAAM,yBAAyB;AAAA,EAClC;AAAA,EACA;AACJ;AAEO,IAAM,sBAAsBA,GAC9B,OAAO;AAAA,EACJ,MAAMA,GACD,KAAK,sBAAsB,EAC3B,QAAQ,UAAU;AAAA,EACvB,UAAU;AAAA,EACV,YAAYA,GACP,MAAM,CAACA,GAAE,QAAQ,OAAO,GAAGA,GAAE,QAAQ,MAAM,CAAC,CAAC,EAC7C,QAAQ,OAAO;AACxB,CAAC,EACA,QAAQ,CAAC,CAAC,EACV;AAAA,EACG,CAAC,SACG,CAAC,QAAQ,KAAK,SAAS,cAAc,CAAC,KAAK,QAAQ;AAAA,EACvD;AAAA,IACI,SACI;AAAA,EACR;AACJ","sourcesContent":["import { z } from \"zod\";\nimport { postgresConfigSchema } from \"./postgres.js\";\n\nexport const ulldSupportedDatabases = [\n    \"postgres\",\n    \"sqlite\",\n] as const\n\nexport const databaseBuildSchema = z\n    .object({\n        type: z\n            .enum(ulldSupportedDatabases)\n            .default(\"postgres\"),\n        postgres: postgresConfigSchema,\n        prioritize: z\n            .union([z.literal(\"speed\"), z.literal(\"size\")])\n            .default(\"speed\"),\n    })\n    .default({})\n    .refine(\n        (data) =>\n            !Boolean(data.type === \"postgres\" && !data.postgres),\n        {\n            message:\n                \"If you set the database type to 'Postgres', you must also provide a postgres configuration with either a port number and a database name, or a connection URI.\",\n        },\n    );\n","import { z } from \"zod\";\n\nexport const postgresConfigSchema = z\n    .object({\n        port: z.coerce.number().int().default(5432),\n        dbName: z.string().default(\"ulld\"),\n        connectionURI: z.string().default(\"\"),\n    })\n    .default({})\n    .refine((data) =>\n        Boolean(data.connectionURI !== \"\" || (data.port && data.dbName)),\n    )\n    .transform((data) => {\n        if (data.connectionURI && data.connectionURI !== \"\") {\n            return {\n                connectionURI: data.connectionURI,\n            };\n        }\n        return {\n            port: data.port,\n            dbName: data.dbName,\n        };\n    });\n"]}