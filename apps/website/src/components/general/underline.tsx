import React, { useEffect } from "react";
import type { CSSProperties, SVGProps } from "react";
import {Variants, motion} from "framer-motion"

interface Props extends React.ComponentProps<typeof motion.svg> {
    show: boolean;
    scale?: number;
    color?: string;
}

const style: React.CSSProperties = {
    fillRule: "nonzero",
    clipRule: "evenodd",
    strokeLinecap: "round",
    strokeLinejoin: "round",
};

const collapsedStyle: CSSProperties = {
    transform: "scaleX(0)",
    transformOrigin: "left",
    /* transition: "transform 0.15s ease", */
};


const pathVariants: Variants = {
    hide: {
        scaleX: "0",
        transition: {
            duration: 0
        }
    },
    show: (i: number) => {
        return {
            scaleX: 1,
            origin: "left",
            originX: "left",
            transition: {
                delay: (i - 1) * 0.45,
                type: "spring",
                bounce: 0
            }
        } 
    }
}

export const TextUnderline = ({
    show,
    color = "hsl(var(--primary))",
    scale = 1,
    width = 192,
    ...props
}: Props) => {
    return (
        <motion.svg
            height="100%"
            strokeMiterlimit="10"
            style={style}
            version="1.1"
            viewBox="0 0 1092.1 383.866"
            width="100%"
            xmlSpace="preserve"
            xmlns="http://www.w3.org/2000/svg"
            {...props}
        >
            <defs />
            <clipPath id="ArtboardFrame">
                <rect height="383.866" width="1092.1" x="0" y="0" />
            </clipPath>
            <g clipPath="url(#ArtboardFrame)" id="Layer-1">
                <g opacity="1">
                    <g opacity="1">
                        <motion.path
                            id="underline-path-1"
                            className={"scale-x-0 origin-left"}
                            d="M380.75 78.4062C374.178 78.4485 367.6 78.5454 361.031 78.75C354.23 78.9619 347.42 79.505 340.625 79.8438C334.359 80.1561 328.078 80.3853 321.812 80.7188C314.661 81.0993 307.499 81.2505 300.344 81.5625C287.488 82.123 274.648 82.8919 261.812 83.8125C233.322 85.8559 204.867 88.4184 176.375 90.4375C140.607 92.9722 104.803 94.7382 68.9375 94.4375C58.1448 89.6955 43.4828 99.3022 36.1875 115.906C28.8922 132.51 31.7073 149.821 42.5 154.562C63.9498 154.245 85.3799 153.323 106.781 151.844C126.901 150.453 146.976 148.514 167.031 146.406C193.087 143.668 219.106 140.535 245.094 137.219C251.803 136.363 258.516 135.531 265.219 134.625C278.102 132.884 290.965 131.008 303.875 129.469C310.455 128.684 317.085 127.999 323.688 127.438C330.262 126.878 336.862 126.571 343.438 126.031C349.453 125.537 355.455 124.977 361.469 124.469C374.84 123.338 388.193 121.974 401.562 120.812C416.123 119.547 430.706 118.485 445.281 117.406C472.616 115.383 499.976 113.781 527.344 112.281C584.564 109.145 641.817 106.918 699.094 105.125C732.642 104.075 766.195 103.099 799.75 102.281C809.505 102.044 819.276 101.824 829.031 101.594C833.907 101.479 838.779 101.297 843.656 101.25C852.074 101.169 860.488 101.35 868.906 101.406C884.542 101.511 900.177 101.615 915.812 101.719C957.891 101.997 999.983 102.138 1042.06 102.219C1044.22 103.181 1047.18 101.258 1048.66 97.9375C1050.14 94.6167 1049.6 91.1499 1047.44 90.1875C1001.77 90.0998 956.101 89.9275 910.438 89.625C896.606 89.5334 882.769 89.4377 868.938 89.3438C862.325 89.2988 855.705 89.3734 849.094 89.2188C843.753 89.0938 838.401 88.824 833.062 88.625C822.38 88.2268 811.714 87.8272 801.031 87.4375C764.247 86.0957 727.445 84.7077 690.656 83.5C620.007 81.1808 549.339 79.5862 478.656 78.8438C457.862 78.6253 437.077 78.5318 416.281 78.4688C404.436 78.4328 392.595 78.3301 380.75 78.4062Z"
                            fill={color}
                            stroke="none"
                            custom={1}
                            variants={pathVariants}
                            initial="hide"
                            animate={show ? "show" : "hide"}
                        />
                    </g>
                    <g opacity="1">
                        <motion.path
                            id="underline-path-2"
                            className={"scale-x-0 origin-left"}
                            d="M1055.94 164.094C1046.22 164.247 1036.49 164.566 1026.78 165.156C1007.61 166.322 988.495 168.33 969.406 170.438C947.055 172.905 924.746 175.586 902.312 177.219C894.016 177.823 885.661 178.347 877.344 178.562C873.129 178.672 868.903 178.621 864.688 178.625C855.05 178.634 845.417 178.547 835.781 178.406C808.637 178.01 781.526 177.04 754.406 175.844C719.338 174.297 684.271 172.392 649.219 170.531C604.011 168.132 558.798 165.763 513.531 164.812C503.345 164.599 493.156 164.49 482.969 164.344C470.261 164.161 457.552 163.983 444.844 164.156C430.149 164.356 415.477 165.278 400.781 165.531C395.118 165.629 389.445 165.606 383.781 165.656C371.795 165.762 359.826 165.932 347.844 166.281C324.488 166.963 301.137 167.94 277.781 168.625C242.683 169.655 207.551 170.282 172.438 169.906C161.645 165.15 146.974 174.771 139.656 191.375C132.339 207.979 135.145 225.306 145.938 230.062C206.779 229.153 267.558 225.409 328.156 219.969C334.651 219.386 341.171 218.811 347.656 218.125C359.382 216.885 371.078 215.466 382.812 214.312C388.58 213.745 394.378 213.22 400.156 212.781C406.586 212.293 413.042 212.063 419.469 211.531C433.026 210.409 446.543 208.975 460.094 207.781C477.555 206.243 495.037 204.941 512.531 203.844C533.098 202.554 553.688 201.71 574.281 200.969C611.128 199.643 647.982 198.876 684.844 198.094C739.98 196.923 795.136 195.487 850.188 192.094C857.677 191.632 865.164 191.008 872.656 190.594C879.941 190.191 887.219 189.929 894.5 189.438C906.47 188.629 918.412 187.521 930.344 186.281C958.665 183.339 986.934 179.654 1015.34 177.625C1027.16 176.781 1039 176.312 1050.84 176.125C1053 177.039 1055.87 175.07 1057.28 171.75C1058.69 168.43 1058.1 165.008 1055.94 164.094Z"
                            fill={color}
                            stroke="none"
                            custom={2}
                            variants={pathVariants}
                            initial="hide"
                            animate={show ? "show" : "hide"}
                        />
                    </g>
                    <g opacity="1">
                        <motion.path
                            id="underline-path-3"
                            className={"scale-x-0 origin-left"}
                            d="M522.188 235.781C515.735 235.829 509.264 235.823 502.812 235.969C496.8 236.104 490.767 236.461 484.781 237.062C480.633 237.479 476.507 238.167 472.375 238.719C467.819 239.327 463.25 239.875 458.688 240.438C453.992 241.016 449.259 241.453 444.562 242.031C436.51 243.023 428.508 244.16 420.5 245.469C397.134 249.287 373.841 253.734 350.312 256.469C341.688 257.471 333.05 258.377 324.375 258.812C318.155 259.125 311.946 259.221 305.719 259.188C294.927 254.578 280.435 264.304 273.344 280.906C266.253 297.509 269.24 314.703 280.031 319.312C297.518 318.769 314.89 317.084 332.188 314.469C341.073 313.125 349.905 311.467 358.719 309.719C376.579 306.177 394.31 302.02 412 297.719C416.312 296.67 420.614 295.594 424.906 294.469C433.614 292.185 442.311 289.736 451.094 287.75C454.08 287.074 457.085 286.414 460.094 285.844C464.132 285.079 468.198 284.556 472.25 283.875C477.583 282.979 482.887 281.934 488.219 281.031C498.274 279.329 508.39 277.863 518.5 276.531C577.91 268.703 637.697 264.623 697.531 261.781C718.721 260.775 739.924 259.889 761.125 259.156C767.445 258.938 773.773 258.712 780.094 258.5C783.063 258.4 786.029 258.231 789 258.219C794.816 258.195 800.653 258.357 806.469 258.438C817.011 258.584 827.552 258.737 838.094 258.875C863.498 259.208 888.906 259.314 914.312 259.406C916.471 260.373 919.418 258.477 920.906 255.156C922.394 251.835 921.846 248.373 919.688 247.406C890.33 247.299 860.98 247.073 831.625 246.688C823.266 246.578 814.922 246.46 806.562 246.344C802.563 246.288 798.529 246.314 794.531 246.188C790.97 246.075 787.431 245.755 783.875 245.531C777.107 245.106 770.331 244.692 763.562 244.281C741.118 242.918 718.672 241.465 696.219 240.25C651.182 237.813 606.102 236.212 561 235.812C548.059 235.698 535.129 235.686 522.188 235.781Z"
                            fill={color}
                            stroke="none"
                            custom={3}
                            variants={pathVariants}
                            initial="hide"
                            animate={show ? "show" : "hide"}
                        />
                    </g>
                </g>
            </g>
        </motion.svg>
    );
};
